<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>home</title>
</head>
<body>
  <div class="k">
  <a href="home.html" id="logo">HOME</a>
  <a href="background.html" id="logo">BACKGROUND</a>
</div>
  <main>
    <div id="userDataDisplay"><div class="circle" style="width: 183px; height: 183px; left: 368px; top: 364px;"><p>1</p></div><div class="circle" style="width: 197px; height: 197px; left: 749px; top: 292px;"><p>2</p></div><div class="circle" style="width: 107px; height: 107px; left: 550px; top: 656px;"><p>3</p></div><div class="circle" style="width: 154px; height: 154px; left: 1076px; top: 92px;"><p>4</p></div><div class="circle" style="width: 101px; height: 101px; left: 268px; top: 628px;"><p>5</p></div><div class="circle" style="width: 176px; height: 176px; left: 1070px; top: 311px;"><p>6</p></div></div>
  </main>
  <button class="create-button" onclick="redirectToCreatePage()">CREATE YOUR OWN BUBBLE</button>
  
  <script>
    function redirectToCreatePage() {
      window.location.href = 'create.html';
    }


    
    var userData = JSON.parse(sessionStorage.getItem("userData")) || [];

    //初始化内容可以加在这里
    userData.push(60);
    userData.push(50);
    userData.push(40);
    userData.push(30);
    userData.push(20);
    userData.push(10);

    userData.reverse();
    



var userDataDisplay = document.getElementById("userDataDisplay");

function getRandomPositionAndSize() {
    var size = Math.floor(Math.random() * 100) + 100; 
    var xPos = Math.floor(Math.random() * (window.innerWidth - size));
    var yPos = Math.floor(Math.random() * (window.innerHeight - size))+60;
    return { x: xPos, y: yPos, size: size };
}

userData.forEach(function(data, index) {
    var circle = document.createElement("div");
    circle.className = "circle";
    
    var positionAndSize = getRandomPositionAndSize();
    circle.style.width = positionAndSize.size + "px";
    circle.style.height = positionAndSize.size + "px";
    circle.style.left = positionAndSize.x + "px";
    circle.style.top = positionAndSize.y + "px";

    
    var overlapping = false;
    for (var i = 0; i < userDataDisplay.children.length; i++) {
        var existingCircle = userDataDisplay.children[i];
        if (
            positionAndSize.x < existingCircle.offsetLeft + existingCircle.offsetWidth &&
            positionAndSize.x + positionAndSize.size > existingCircle.offsetLeft &&
            positionAndSize.y < existingCircle.offsetTop + existingCircle.offsetHeight &&
            positionAndSize.y + positionAndSize.size > existingCircle.offsetTop
        ) {
            overlapping = true;
            break;
        }
    }

    
    if (overlapping) {
        positionAndSize = getRandomPositionAndSize();
        circle.style.width = positionAndSize.size + "px";
        circle.style.height = positionAndSize.size + "px";
        circle.style.left = positionAndSize.x + "px";
        circle.style.top = positionAndSize.y + "px";
    }

    
    var paragraph = document.createElement("p");
    paragraph.innerText = (index + 1);
    circle.appendChild(paragraph);

    
    circle.onclick = function() {
        sessionStorage.setItem("selectedUserData", data);
        window.location.href = "viewContent.html";
    };

    userDataDisplay.appendChild(circle);
});

  </script>
  

 /body></html>
